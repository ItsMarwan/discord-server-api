<!doctype html>
<html lang="en" class="antialiased">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Discord Lookup API - ItsMarwan</title>
  <meta name="description" content="Discord Lookup API + Bot — server-scoped lookups (requires bot & guild)." />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/png" href="/discord-api/imgs/favicon.png">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#e8f3ff',
              100: '#cfe7ff',
              200: '#9ecfff',
              300: '#6db6ff',
              400: '#3b9eff',
              500: '#1976D2',
              600: '#1565C0',
              700: '#114aa0',
              800: '#0d3a7a',
              900: '#092a55'
            }
          }
        }
      }
    }
  </script>
  <style>
    .theme-transition { transition: background-color 160ms ease, color 160ms ease; }
    pre code { white-space: pre; }
    pre::-webkit-scrollbar { height: 8px; }
    pre::-webkit-scrollbar-track { background: #1e293b; }
    pre::-webkit-scrollbar-thumb { background: #1976D2; border-radius: 4px; }
    pre::-webkit-scrollbar-thumb:hover { background: #1565C0; }
    .dark pre { scrollbar-color: #3b9eff #1f2937; }
    .dark pre::-webkit-scrollbar-track { background: #1f2937; }
    .dark pre::-webkit-scrollbar-thumb { background: #3b9eff; }
    .dark pre::-webkit-scrollbar-thumb:hover { background: #1976D2; }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body class="bg-white text-brand-700 dark:bg-gray-900 dark:text-white theme-transition">
  <div class="min-h-screen flex flex-col">

    <header class="bg-brand-600 dark:bg-brand-700 text-white py-4 md:py-8 shadow-md">
      <div class="max-w-5xl mx-auto px-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div class="flex items-center gap-3">
          <img src="/discord-api/imgs/favicon.png" alt="logo" class="w-10 h-10 md:w-12 md:h-12 rounded-md shadow"/>
          <div>
            <h1 class="text-xl md:text-2xl font-semibold">Discord Lookup API</h1>
            <p class="text-xs md:text-sm opacity-90">Bot-powered server-scoped user lookups — privacy-first.</p>
          </div>
        </div>

        <div class="flex items-center gap-2 md:gap-3">
          <a id="inviteBtn" target="_blank" href="https://discord.com/oauth2/authorize?client_id=1418180497191993354&scope=bot&permissions=65536" 
             class="inline-flex items-center gap-2 bg-white text-brand-700 px-3 md:px-4 py-2 text-sm md:text-base rounded-lg shadow hover:opacity-95 transition">
            <i class="fa-solid fa-robot"></i>
            <span>Invite Bot</span>
          </a>
          <button id="themeToggle" class="p-2 rounded-md bg-white/10 hover:bg-white/20 transition" aria-label="Toggle theme">
            <i id="themeIcon" class="fa-solid fa-moon"></i>
          </button>
        </div>
      </div>
    </header>

    <main class="flex-1 max-w-5xl mx-auto px-4 py-6 md:py-8 w-full">
      <section class="grid grid-cols-1 md:grid-cols-3 gap-6">

        <div class="col-span-2 space-y-4">
          <div class="p-4 md:p-6 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
            <h2 class="text-lg md:text-xl font-semibold">How it works</h2>
            <p class="mt-2 text-sm md:text-base text-gray-700 dark:text-gray-200">The API is backed by a Discord bot. To use server endpoints you must invite the bot to your server. Lookups are scoped by <code class="rounded px-1 py-0.5 bg-white/80 text-red-600 dark:bg-gray-700 dark:text-red-300">guild</code> ID — the user being queried must be a member of that guild. This prevents cross-server stalking.</p>
            <div class="mt-4 flex flex-wrap gap-2">
              <a class="px-3 py-2 rounded-md bg-brand-500 text-white text-sm md:text-base font-medium hover:bg-brand-700 transition" target="_blank" href="/api/discord-server-api/guild?guild=1150156572857733170">Test Guild Lookup</a>
              <a class="px-3 py-2 rounded-md border border-gray-200 dark:border-gray-700 text-xs md:text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition" target="_blank" href="/api/discord-server-api/user?guild=1150156572857733170&user=999407143646142514">Test User Lookup</a>
            </div>
          </div>

          <div class="p-4 md:p-6 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
            <h3 class="font-semibold">Getting started</h3>
            <ol class="mt-3 list-decimal list-inside text-sm md:text-base text-gray-700 dark:text-gray-200 space-y-2">
              <li>Invite the bot to your server using <code class="rounded px-1 py-0.5 bg-white/80 dark:bg-gray-700">https://discord.com/oauth2/authorize?client_id=1418180497191993354&scope=bot&permissions=65536</code> or the OAuth link.</li>
              <li>Ensure the bot has permission to view server members.</li>
              <li>Call <code class="rounded px-1 py-0.5 bg-white/80 dark:bg-gray-700">/api/discord-server-api/user?guild=GUILD_ID&user=999407143646142514</code> (only works if user is in guild).</li>
            </ol>
          </div>

          <div class="p-4 md:p-6 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
            <h3 class="font-semibold">API Examples</h3>
            <div class="mt-3 space-y-3 text-sm md:text-base text-gray-700 dark:text-gray-200">

              <div>
                <div class="font-medium">Get Guild Info</div>
                <pre class="mt-2 rounded text-xs md:text-sm overflow-x-auto"><code>GET /api/discord-server-api/guild?guild=1150156572857733170</code></pre>
                <pre class="mt-2 rounded bg-gray-100 dark:bg-gray-900 p-3 text-xs md:text-sm overflow-x-auto whitespace-pre"><code>{
  "id": "1150156572857733170",
  "name": "ItsMarwan's Blue Planet",
  "description": "ItsMarwan Official Discord Server! If Y...",
  "icon": "https://cdn.discordapp.com/icons/...",
  "banner": null,
  "splash": null,
  "discoverySplash": "https://cdn.discordapp.com/discovery-splashes/...",
  "vanityURL": "itsmarwan-s-blue-planet-1...",
  "verificationLevel": 3,
  "explicitContentFilter": 2,
  "mfaLevel": 1,
  "nsfwLevel": 0,
  "features": [
    "GUILD_ONBOARDING_HAS_PROMPTS",
    "ENABLED_DISCOVERA..."
  ],
  "premiumTier": 0,
  "premiumSubscriptionCount": 1,
  "approximateMemberCount": 1754,
  "approximatePresenceCount": 578,
  "ownerId": "999407143646142514",
  "joinedAt": null,
  "afkTimeout": 900,
  "maxMembers": 25000000,
  "maxPresences": null,
  "preferredLocale": "en-US"
}</code></pre>
              </div>

              <div>
                <div class="font-medium">User lookup (guild-scoped)</div>
                <pre class="mt-2 rounded text-xs md:text-sm overflow-x-auto"><code>GET /api/discord-server-api/user?guild=GUILD_ID&user=999407143646142514</code></pre>
                <pre class="mt-2 rounded bg-gray-100 dark:bg-gray-900 p-3 text-xs md:text-sm overflow-x-auto whitespace-pre"><code>{
  "id": "999407143646142514",
  "tag": "itsmarwan.",
  "username": "itsmarwan.",
  "bot": false,
  "badges": [
    "HYPESQUAD_BRAVERY",
    "ACTIVE_DEVELOPER"
  ],
  "avatar": {
    "id": "23cbb86f9144f88876034a82ba5f4b61",
    "link": "https://cdn.discordapp.com/avatars/...",
    "is_animated": false
  },
  "banner": {
    "id": null,
    "link": null,
    "is_animated": false,
    "color": 460033
  },
  "createdAt": "2022-07-20T20:07:11.132Z"
}</code></pre>
              </div>

            </div>
          </div>


        </div>

        <aside class="space-y-4">
          <div class="p-4 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
            <h4 class="font-semibold">Quick Links</h4>
            <ul class="mt-3 text-sm space-y-2">
              <li><a href="/api/discord-server-api/guild?guild=1150156572857733170" target="_blank" class="text-brand-600 dark:text-brand-300 hover:underline">/api/discord-server-api/guild</a></li>
              <li><a href="/api/discord-server-api/user?guild=1150156572857733170&user=999407143646142514" target="_blank" class="text-brand-600 dark:text-brand-300 hover:underline">/api/discord-server-api/user</a></li>
              <li><a href="https://discord.com/oauth2/authorize?client_id=1418180497191993354&scope=bot&permissions=65536" target="_blank" class="text-brand-600 dark:text-brand-300 hover:underline">Invite Bot</a></li>
            </ul>
          </div>

          <div class="p-4 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md flex flex-col sm:flex-row items-start sm:items-center gap-3">
            <div class="flex-1">
              <h5 class="font-semibold">Privacy by design</h5>
              <p class="text-sm text-gray-600 dark:text-gray-300">Lookups require a guild reference — you can't query users outside the server the bot is in.</p>
            </div>
          </div>

          <div class="p-4 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
            <h5 class="font-semibold">Host yourself</h5>
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-3">This project is open source! You can deploy it yourself using Vercel:</p>
            <a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fitsmarwan%2Fdiscord-server-api&env=DISCORD_BOT_TOKEN&envDescription=Discord%20bot%20token&envLink=https%3A%2F%2Fdiscord.com%2Fdevelopers%2Fdocs%2Fquick-start%2Fgetting-started&project-name=discord-server-api&repository-name=discord-server-api" target="_blank">
              <img src="https://vercel.com/button" alt="Deploy with Vercel" />
            </a>
            <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">Source code available on <a href="https://github.com/itsmarwan/discord-server-api" class="text-brand-600 dark:text-brand-300 hover:underline" target="_blank">GitHub</a>.</p>
          </div>

          <div class="p-4 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
            <h5 class="font-semibold">Features</h5>
            <ul class="mt-2 list-disc list-inside text-sm text-gray-600 dark:text-gray-300 space-y-1">
              <li>No Account Needed</li>
              <li>No API Key Required</li>
              <li>Online 24/7 via Vercel</li>
              <li>Light/Dark Mode Toggle</li>
              <li>No Hosting Needed</li>
              <li>Easy To Use</li>
              <li>Has Discord Bot (required for guild lookup to work)</li>
            </ul>
          </div>

          <div class="p-4 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
            <h5 class="font-semibold">FAQ</h5>
            <div class="mt-2 text-sm text-gray-600 dark:text-gray-300 space-y-3">
              <div>
                <p><strong>Q: Why This Happens?</strong><br>A: Because the <a href="https://discord.com/oauth2/authorize?client_id=1418180497191993354&scope=bot&permissions=65536" target="_blank" class="text-brand-600 dark:text-brand-300 hover:underline">Bot</a> isn't in the server. Therefore it doesn’t see the server.</p>
              </div>
              <div>
                <p><strong>Q: Is It Fixable?</strong><br>A: No. But let me know if you find a way!</p>
              </div>
              <div>
                <p><strong>Q: Is It Safe?</strong><br>A: Yes 100%! Just make sure <strong>NEVER</strong> give Admin or dangerous permissions to the bot in case it gets compromised.</p>
              </div>
              <div>
                <p><strong>Q: What Does The Bot Do?</strong><br>A: The bot does absolutely nothing, it has 0 lines of code.</p>
              </div>
              <div>
                <p><strong>Q: Why Have a Discord Bot?</strong><br>A: Because if the bot isn’t in the server you want to lookup, it will return nothing.</p>
              </div>
            </div>
          </div>
        </aside>
      </section>

      <section class="mt-8 p-4 md:p-6 rounded-xl bg-gray-50 dark:bg-gray-800 shadow-md">
        <h3 class="font-semibold">Docs</h3>
        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm md:text-base text-gray-700 dark:text-gray-200">
          <div>
            <h4 class="font-medium">Authentication</h4>
            <p class="mt-2">No API key required — the serverless function uses a bot token stored in environment variables. Keep your bot token secret.</p>
          </div>
          <div>
            <h4 class="font-medium">Rate limits</h4>
            <p class="mt-2">This simple serverless API does not implement caching. For heavy usage add caching or rate-limits to avoid Discord rate limit errors.</p>
          </div>
        </div>
      </section>
    </main>

    <footer class="py-6 text-center text-xs md:text-sm text-gray-600 dark:text-gray-400">
      © 2025 Discord Lookup API — Built by ItsMarwan
    </footer>
  </div>

  <script>
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const smallToggle = document.getElementById('smallToggle');
    
    function setTheme(theme) {
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
        themeIcon.classList.replace('fa-moon', 'fa-sun');
      } else {
        document.documentElement.classList.remove('dark');
        themeIcon.classList.replace('fa-sun', 'fa-moon');
      }
    }
    
    function getPreferredTheme() {
      return localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    }
    
    let currentTheme = getPreferredTheme();
    setTheme(currentTheme);
    
    [themeToggle, smallToggle].forEach(btn => {
      if (btn) {
        btn.addEventListener('click', () => {
          currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
          localStorage.setItem('theme', currentTheme);
          setTheme(currentTheme);
        });
      }
    });
    
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
      if (!localStorage.getItem('theme')) {
        setTheme(e.matches ? 'dark' : 'light');
      }
    });
  </script>
</body>
</html>
